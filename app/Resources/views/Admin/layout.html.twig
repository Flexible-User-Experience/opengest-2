{% extends 'SonataAdminBundle::standard_layout.html.twig' %}

{# removes top search bar #}
{% block sonata_sidebar_search %}{% endblock %}

{# custom logo #}
{% block logo %}
    {% spaceless %}
        <a href="{{ path('sonata_admin_dashboard') }}" class="logo">
            {% if app.user.defaultEnterprise is not null and app.user.defaultEnterprise.logo is not null %}
                <img style="max-width:125px;" src="{{ vich_uploader_asset(app.user.defaultEnterprise, 'logoFile') | imagine_filter('125x32') }}" alt="{{ app.user.defaultEnterprise.name }}">
            {% else %}
                <img style="max-width:125px;" src="http://via.placeholder.com/125x32?text={{ admin_brand_title }}" alt="logo">
            {% endif %}
        </a>
        {# TODO #}
        {#<div class="dropdown">#}
            {#<button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">#}
                {#<img style="max-width:125px;" src="{{ vich_uploader_asset(app.user.defaultEnterprise, 'logoFile') | imagine_filter('125x32') }}" alt="{{ app.user.defaultEnterprise.name }}">#}
                {#<span class="caret"></span>#}
            {#</button>#}
            {#<ul class="dropdown-menu" aria-labelledby="dropdownMenu1">#}
                {#{% for enterprise in app.user.enterprises %}#}
                    {#<li><a href="{{ enterprise.id }}"><img style="max-width:125px;" src="{{ vich_uploader_asset(enterprise, 'logoFile') | imagine_filter('125x32') }}" alt="{{ enterprise.name }}"></a></li>#}
                {#{% endfor %}#}
            {#</ul>#}
        {#</div>#}
    {% endspaceless %}
{% endblock %}

{# custom sidebar footer #}
{% block side_bar_after_nav %}
    <p class="text-left small" style="padding:50px 0 0 20px;color:#EEE;">{{ admin_tag_version }}<br><i class="fa fa-code"></i> Desenvolupat per <a href="http://www.flux.cat" target="_blank">Flux</a><br><i class="fa fa-copyright"></i> {{ 'now' | date('Y') }} <a href="{{ path('front_homepage') }}" target="_blank">{{ main_brand_title | title }}</a></p>
{% endblock %}

{# custom top menu #}
{% block sonata_top_nav_menu %}
    <div class="navbar-custom-menu">
        <ul class="nav navbar-nav navbar-right">
            <li><a href="{{ path('front_homepage') }}"><i class="fa fa-globe"></i></a></li>
            <li><a href="{{ path('admin_app_user_profile') }}">{% if app.user.mainImage %}<img class="profile-img" src="{{ vich_uploader_asset(app.user, 'mainImageFile') | imagine_filter('32x32') }}" alt="profile image"> {% endif %}{{ app.user.fullname }}</a></li>
            <li><a href="{{ path('sonata_user_admin_security_logout') }}"><i class="fa fa-power-off text-success"></i></a></li>
        </ul>
    </div>
{% endblock %}

{# override css includes #}
{% block stylesheets %}
    {{ parent() }}
    {% stylesheets filter="cssrewrite,less" '@mybackendcss' %}
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock %}

{# override javascript includes #}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/app/js/pdf.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/pdf.worker.js') }}"></script>
{% endblock %}
